<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>í•™ìŠµ ê¸°ëŠ¥ ì±—ë´‡ (ì˜êµ¬ ì €ì¥+ì‚­ì œ+ëª©ë¡)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f4f4f4;
    }
    #chatbox {
      width: 100%;
      max-width: 500px;
      height: 400px;
      border: 1px solid #ccc;
      background-color: white;
      overflow-y: auto;
      padding: 10px;
      margin-bottom: 10px;
    }
    .message {
      margin: 5px 0;
    }
    .user {
      text-align: right;
      color: blue;
    }
    .bot {
      text-align: left;
      color: green;
    }
    #inputArea {
      display: flex;
    }
    #userInput {
      flex: 1;
      padding: 10px;
      font-size: 16px;
    }
    #sendBtn {
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h2>ğŸ¤– í•™ìŠµ ê¸°ëŠ¥ ì±—ë´‡ (ì˜êµ¬ ì €ì¥ + ì‚­ì œ + ëª©ë¡)</h2>
  <div id="chatbox"></div>

  <div id="inputArea">
    <input type="text" id="userInput" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." autocomplete="off" />
    <button id="sendBtn">ë³´ë‚´ê¸°</button>
  </div>

  <script>
    const chatbox = document.getElementById('chatbox');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');

    let learnedResponses = {};
    const STORAGE_KEY = "learnedChatbotData";

    function loadLearnedData() {
      const data = localStorage.getItem(STORAGE_KEY);
      if (data) {
        try {
          learnedResponses = JSON.parse(data);
        } catch {
          learnedResponses = {};
        }
      } else {
        learnedResponses = {};
      }
    }

    function saveLearnedData() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(learnedResponses));
    }

    function appendMessage(sender, text) {
      const msg = document.createElement('div');
      msg.classList.add('message', sender);
      msg.textContent = text;
      chatbox.appendChild(msg);
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    function getCommandList() {
      return `ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´:
- ì•ˆë…•, ì´ë¦„, ì‹œê°„, ë‚ ì§œ, ë‚ ì”¨, ì˜ì, ê³ ë§ˆì›Œ
- ì›ƒì–´ì¤˜, ê¸°ë¶„ ì–´ë•Œ?, ì‚¬ë‘í•´, ë…¸ë˜ ë¶ˆëŸ¬ì¤˜, ë†ë‹´í•´ì¤˜
- ê³µë¶€ ë„ì™€ì¤˜, ìë°”ìŠ¤í¬ë¦½íŠ¸ ì•Œë ¤ì¤˜, HTMLì´ ë­ì•¼?
- ë„ì›€ë§ / ëª…ë ¹ì–´
- í•™ìŠµ: ì§ˆë¬¸=ë‹µë³€  (ì˜ˆ: í•™ìŠµ: ë„ˆ ëª‡ì‚´ì´ì•¼?=ë‚˜ëŠ” 1ì‚´ì´ì•¼!)
- ìŠì–´ì¤˜: ì§ˆë¬¸    (ì˜ˆ: ìŠì–´ì¤˜: ë„ˆ ëª‡ì‚´ì´ì•¼?)
- í•™ìŠµëª©ë¡         (í˜„ì¬ í•™ìŠµí•œ ì§ˆë¬¸ ë³´ê¸°)`;
    }

    function botReply(input) {
      const msg = input.toLowerCase().trim();

      // í•™ìŠµ ëª…ë ¹ì–´
      if (msg.startsWith("í•™ìŠµ:")) {
        const data = input.slice("í•™ìŠµ:".length).split('=');
        if (data.length === 2) {
          const question = data[0].trim().toLowerCase();
          const answer = data[1].trim();
          learnedResponses[question] = answer;
          saveLearnedData();
          return `"${question}"ì— ëŒ€í•œ ë‹µë³€ì„ í•™ìŠµí–ˆì–´ìš”!`;
        } else {
          return "í•™ìŠµ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•Šì•„ìš”. ì˜ˆì‹œ: í•™ìŠµ: ë„ˆ ëª‡ì‚´ì´ì•¼?=ë‚˜ëŠ” 1ì‚´ì´ì•¼!";
        }
      }

      // ìŠì–´ì¤˜ ëª…ë ¹ì–´
      if (msg.startsWith("ìŠì–´ì¤˜:")) {
        const question = input.slice("ìŠì–´ì¤˜:".length).trim().toLowerCase();
        if (question in learnedResponses) {
          delete learnedResponses[question];
          saveLearnedData();
          return `"${question}"ì— ëŒ€í•œ ë‹µë³€ì„ ì‚­ì œí–ˆì–´ìš”!`;
        } else {
          return `"${question}"ì— ëŒ€í•œ í•™ìŠµëœ ë‹µë³€ì´ ì—†ì–´ìš”.`;
        }
      }

      // í•™ìŠµëª©ë¡ ëª…ë ¹ì–´
      if (msg === "í•™ìŠµëª©ë¡") {
        const keys = Object.keys(learnedResponses);
        if (keys.length === 0) return "ì•„ì§ í•™ìŠµëœ ì§ˆë¬¸ì´ ì—†ì–´ìš”.";
        return "í•™ìŠµëœ ì§ˆë¬¸ë“¤:\n- " + keys.join("\n- ");
      }

      // í•™ìŠµëœ ë‹µë³€ ìˆìœ¼ë©´ ë°˜í™˜
      if (msg in learnedResponses) {
        return learnedResponses[msg];
      }

      // ê¸°ë³¸ ëª…ë ¹ì–´
      if (msg.includes("ì•ˆë…•")) return "ì•ˆë…•í•˜ì„¸ìš”! ë§Œë‚˜ì„œ ë°˜ê°€ì›Œìš” :)";
      if (msg.includes("ì´ë¦„")) return "ì €ëŠ” í•™ìŠµ ê¸°ëŠ¥ì´ ìˆëŠ” ê°„ë‹¨í•œ ì±—ë´‡ì´ì—ìš”!";
      if (msg.includes("ì‹œê°„")) return "ì§€ê¸ˆ ì‹œê°„ì€ " + new Date().toLocaleTimeString() + " ì…ë‹ˆë‹¤.";
      if (msg.includes("ë‚ ì§œ")) return "ì˜¤ëŠ˜ì€ " + new Date().toLocaleDateString() + " ì…ë‹ˆë‹¤.";
      if (msg.includes("ë‚ ì”¨")) return "ë‚ ì”¨ ì •ë³´ëŠ” ì•„ì§ ì—°ê²°ë˜ì§€ ì•Šì•˜ì§€ë§Œ, ê¸°ë¶„ì€ ë§‘ìŒì´ì—ìš” â˜€ï¸";
      if (msg.includes("ì˜ì")) return "ì¢‹ì€ ê¿ˆ ê¾¸ì„¸ìš”! ğŸ˜´";
      if (msg.includes("ê³ ë§ˆì›Œ")) return "ì–¸ì œë“ ì§€ìš”! ğŸ˜Š";
      if (msg.includes("ì›ƒì–´")) return "ğŸ˜„ í•˜í•˜!";
      if (msg.includes("ê¸°ë¶„")) return "ì €ëŠ” í•­ìƒ ê¸°ë¶„ì´ ì¢‹ì•„ìš”! ë‹¹ì‹ ì€ìš”?";
      if (msg.includes("ì‚¬ë‘")) return "ì €ë„ ë‹¹ì‹ ì„ ì¢‹ì•„í•´ìš”! â¤ï¸";
      if (msg.includes("ë…¸ë˜")) return "ğŸµ ë¼ë¼ë¼~ ì œ ëª©ì†Œë¦¬ëŠ” ì—†ì§€ë§Œ ë…¸ë˜ëŠ” ì¢‹ì•„í•´ìš”!";
      if (msg.includes("ë†ë‹´")) return "ì™œ ì»´í“¨í„°ëŠ” ë°°ê°€ ê³ í”„ì§€ ì•Šì„ê¹Œìš”? ë©”ëª¨ë¦¬ê°€ ë§ìœ¼ë‹ˆê¹Œìš”! ğŸ¤£";
      if (msg.includes("ê³µë¶€")) return "ì–´ë–¤ ê³¼ëª©ì´ ê¶ê¸ˆí•œê°€ìš”? ì œê°€ ë„ì™€ë“œë¦´ê²Œìš”.";
      if (msg.includes("ìë°”ìŠ¤í¬ë¦½íŠ¸")) return "JavaScriptëŠ” ì›¹ì„ ë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì–¸ì–´ì˜ˆìš”!";
      if (msg.includes("html")) return "HTMLì€ ì›¹ í˜ì´ì§€ì˜ êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” ì–¸ì–´ì…ë‹ˆë‹¤.";
      if (msg.includes("ë„ì›€") || msg.includes("ëª…ë ¹ì–´")) return getCommandList();

      return "ì£„ì†¡í•´ìš”, ì•„ì§ ê·¸ê±´ ì´í•´í•˜ì§€ ëª»í–ˆì–´ìš”. 'ë„ì›€ë§'ì„ ì…ë ¥í•´ë³´ì„¸ìš”.";
    }

    function initialGreeting() {
      appendMessage('bot', "ì•ˆë…•í•˜ì„¸ìš”! ğŸ˜Š ì €ëŠ” í•™ìŠµ ê¸°ëŠ¥ì´ ìˆëŠ” ê°„ë‹¨í•œ ì±—ë´‡ì…ë‹ˆë‹¤.");
      setTimeout(() => {
        appendMessage('bot', "ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”:");
        setTimeout(() => {
          appendMessage('bot', getCommandList());
        }, 500);
      }, 500);
    }

    sendBtn.addEventListener('click', () => {
      const input = userInput.value.trim();
      if (input) {
        appendMessage('user', input);
        const response = botReply(input);
        setTimeout(() => appendMessage('bot', response), 500);
        userInput.value = '';
      }
    });

    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendBtn.click();
    });

    window.onload = () => {
      loadLearnedData();
      initialGreeting();
    };
  </script>

</body>
</html>
